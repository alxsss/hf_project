<?php
$callbackfn = '';
$silentload = '';

if (!empty($_GET['silent'])) { $silentload = 1; }
if (!empty($_GET['callbackfn'])) { $callbackfn = $_GET['callbackfn']; }

?>
(function($){$.hfchat=function(){var _1="<?php echo BASE_URL;?>";var _2=[];var _3=[];<?php echo $settings;?>var _24=0;var _25={};var _26={};var _27={};var _28="";var _29=0;var _2a=0;var _2b=true;var _2c=0;var ie6=false;var _2d;var _2e;var _2f=_8;var _30=1;var _31=0;var _32=0;var _33=0;var _34="";var _35=document.title;var _36=0;var _37={};var _38={};var _39={};var _3a={};var _3b={};var _3c={};var _3d={};var _3e={};var _3f={};var _40=new Date();var _41=_40.getDate();var _42=Math.floor(_40.getTime()/1000);var _43=/([^\x00-\x80]+)|([&][#])+/;var _44=0;var _45;var _46=_42;var _47=0;var _48;var _49=0;var _4a;var _4b;var _4c="<?php echo $silentload;?>";var _4d="<?php echo $callbackfn;?>";var _4e=navigator.userAgent.match(/ipad|iphone|android|windows ce|blackberry|palm|symbian/i)!=null;var _4f=0;var _50=0;$.ajaxSetup({scriptCharset:"utf-8",cache:"false"});if(_6==1){$("<div id=\"hfchat_flashcontent\"></div>").appendTo($("body"));var _51={};var _52={};var _53={id:"hfchatbeep",name:"hfchatbeep"};var so;so=new SWFObjectCC(_1+"swf/hfsound.swf","hfchatbeep","1","1","8","#000");so.write("hfchat_flashcontent");}function _54(_55){var _56=navigator.appName.indexOf("Microsoft")!=-1;return (_56)?window[_55]:document[_55];};function _57(){try{_54("hfchatbeep").hfchatbeep();}catch(error){_6=0;}};function _58(id,_59,_5a){if(_4d==""){$("#hfchat_tooltip").css("display","none");$("#hfchat_tooltip").removeClass("hfchat_tooltip_left").css("left","-100000px");$("#hfchat_tooltip .hfchat_tooltip_content").html(_59);var pos=$("#"+id).offset();var _5b=$("#"+id).width();var _5c=$("#hfchat_tooltip").width();if(_5a==1){$("#hfchat_tooltip").css("left",(pos.left+_5b)-16).addClass("hfchat_tooltip_left");}else{var _5d=(pos.left+_5b)-_5c;_5d+=16;$("#hfchat_tooltip").removeClass("hfchat_tooltip_left").css("left",_5d);}$("#hfchat_tooltip").css("display","block");if(ie6){_5e();}}};function _5f(_60){var _61=$("#hfchat_optionsbutton_popup .hfchat_statustextarea").val();if(_61!=""){$.post(_1+"hfchat_send.php",{statusmessage:_61},function(_62){$(_60).blur();});}};function _63(_64,_65){if(_64.keyCode==13&&_64.shiftKey==0){_5f();return false;}};function _66(id){if(_44==id){_44=0;}};function _67(_68,_69,id,_6a){if((_68.keyCode==13&&_68.shiftKey==0)||_6a==1){var _6b=$(_69).val();_6b=_6b.replace(/^\s+|\s+$/g,"");$(_69).val("");$(_69).css("height","18px");$("#hfchat_user_"+id+"_popup .hfchat_tabcontenttext").css("height","200px");$(_69).css("overflow-y","hidden");$(_69).focus();if(_6b!=""){$.post(_1+"hfchat_send.php",{to:id,message:_6b},function(_6c){if(_6c){_e7(id,_6b,"1","1",_6c,1,Math.floor(new Date().getTime()/1000));$("#hfchat_tabcontenttext_"+id).scrollTop(50000);setTimeout(function(){$("#hfchat_tabcontenttext_"+id).scrollTop(50000);},100);}_66(id);_30=1;if(_2f>_8){_2f=_8;clearTimeout(_2d);_2d=setTimeout(function(){_6d();},_8);}});}return false;}};function _6e(_6f,_70,id){if(_6f.keyCode==13&&_6f.shiftKey==0){$(_70).val("");}var _71=_70.clientHeight;var _72=94;clearTimeout(_45);_44=id;_45=setTimeout(function(){_66(id);},_16);if(_72>_71){_71=Math.max(_70.scrollHeight,_71);if(_72){_71=Math.min(_72,_71);}if(_71>_70.clientHeight){$(_70).css("height",_71+4+"px");$("#hfchat_user_"+id+"_popup .hfchat_tabcontenttext").css("height",218-(_71+4)+"px");}}else{$(_70).css("overflow-y","auto");}$("#hfchat_tabcontenttext_"+id).scrollTop(50000);setTimeout(function(){$("#hfchat_tabcontenttext_"+id).scrollTop(50000);},100);};function _73(){$("#hfchat_optionsbutton_popup .busy").css("text-decoration","none");$("#hfchat_optionsbutton_popup .invisible").css("text-decoration","none");$("#hfchat_optionsbutton_popup .available").css("text-decoration","none");_74();};function _74(){$("#hfchat_userstab_icon").removeClass("hfchat_user_available2");$("#hfchat_userstab_icon").removeClass("hfchat_user_busy2");$("#hfchat_userstab_icon").removeClass("hfchat_user_invisible2");$("#hfchat_userstab_icon").removeClass("hfchat_user_away2");};function _75(_76){$.post(_1+"hfchat_send.php",{status:_76},function(_77){if(_76!="away"){_4a=_76;}});};function _78(_79){_2a=1;_73();$("#hfchat_userstab_icon").addClass("hfchat_user_invisible2");if(_79!=1){_75("offline");}$("#hfchat_userstab_popup").removeClass("hfchat_tabopen");$("#hfchat_userstab").removeClass("hfchat_userstabclick").removeClass("hfchat_tabclick");$("#hfchat_optionsbutton_popup").removeClass("hfchat_tabopen");$("#hfchat_optionsbutton").removeClass("hfchat_tabclick");_7a("buddylist","0");$("#hfchat_userstab_text").html(_2[17]);if(_28!=""){$("#hfchat_user_"+_28+" .hfchat_closebox_bottom").click();_28="";_7a("openChatboxId",_28);}for(chatbox in _3c){if(_3c.hasOwnProperty(chatbox)){if(_3c[chatbox]!=null){$("#hfchat_user_"+chatbox+" .hfchat_closebox_bottom").click();}}}};function _7b(){$("#hfchat_optionsbutton_popup .hfchat_gooffline").click(function(){_78();});$("#hfchat_soundnotifications").click(function(_7c){$.cookie(_a+"sound",$("#hfchat_soundnotifications").attr("checked"),{path:"/",expires:365});});$("#hfchat_popupnotifications").click(function(_7d){$.cookie(_a+"popup",$("#hfchat_popupnotifications").attr("checked"),{path:"/",expires:365});});$("#hfchat_optionsbutton_popup .available").click(function(_7e){_73();$("#hfchat_userstab_icon").addClass("hfchat_user_available2");$(this).css("text-decoration","underline");_75("available");});$("#hfchat_optionsbutton_popup .hfchat_statusbutton").click(function(_7f){_5f();});$("#hfchat_optionsbutton_popup .busy").click(function(_80){_73();$("#hfchat_userstab_icon").addClass("hfchat_user_busy2");$(this).css("text-decoration","underline");_75("busy");});$("#hfchat_optionsbutton_popup .invisible").click(function(_81){_73();$("#hfchat_userstab_icon").addClass("hfchat_user_invisible2");$(this).css("text-decoration","underline");_75("invisible");});$("#hfchat_optionsbutton_popup .hfchat_statustextarea").keydown(function(_82){return _63(_82,this);});$("#hfchat_optionsbutton").mouseover(function(){if(!$("#hfchat_optionsbutton_popup").hasClass("hfchat_tabopen")){if(_29==0){if(_49==0){_58("hfchat_optionsbutton",_2[0]);}}else{if(_49==0){_58("hfchat_optionsbutton",_2[8]);}}}$(this).addClass("hfchat_tabmouseover");});$("#hfchat_optionsbutton").mouseout(function(){$(this).removeClass("hfchat_tabmouseover");if(_49==0){$("#hfchat_tooltip").css("display","none");}});$("#hfchat_optionsbutton").click(function(){if(_34!=""){$("#hfchat_trayicon_"+_34+"_popup").removeClass("hfchat_tabopen");$("#hfchat_trayicon_"+_34).removeClass("hfchat_trayclick");_34="";_7a("trayOpen",_34);}if(_29==0){if(_2a==1){_2a=0;$("#hfchat_userstab_text").html(_2[9]+" ("+_33+")");_6d();$("#hfchat_optionsbutton_popup .available").click();}$("#hfchat_tooltip").css("display","none");var _83=$("#hfchat_base").position().left;var _84=$("#hfchat_base").width();$("#hfchat_optionsbutton_popup").css("left",_83+_84-223-32).css("bottom","24px");$(this).toggleClass("hfchat_tabclick");$("#hfchat_optionsbutton_popup").toggleClass("hfchat_tabopen");$("#hfchat_optionsbutton").toggleClass("hfchat_optionsimages_click");$("#hfchat_userstab_popup").removeClass("hfchat_tabopen");$("#hfchat_userstab").removeClass("hfchat_userstabclick").removeClass("hfchat_tabclick");_7a("buddylist","0");if($.cookie(_a+"sound")){if($.cookie(_a+"sound")=="true"){$("#hfchat_soundnotifications").attr("checked",true);}else{$("#hfchat_soundnotifications").attr("checked",false);}}if($.cookie(_a+"popup")){if($.cookie(_a+"popup")=="true"){$("#hfchat_popupnotifications").attr("checked",true);}else{$("#hfchat_popupnotifications").attr("checked",false);}}}else{if(_2[16]!=""){location.href=_2[16];}}});$("#hfchat_optionsbutton_popup .hfchat_userstabtitle").click(function(){$("#hfchat_optionsbutton").click();});$("#hfchat_optionsbutton_popup .hfchat_userstabtitle").mouseenter(function(){$("#hfchat_optionsbutton_popup .hfchat_userstabtitle .hfchat_minimizebox").addClass("hfchat_chatboxtraytitlemouseover");});$("#hfchat_optionsbutton_popup .hfchat_userstabtitle").mouseleave(function(){$("#hfchat_optionsbutton_popup .hfchat_userstabtitle .hfchat_minimizebox").removeClass("hfchat_chatboxtraytitlemouseover");});};function _85(){var _86="";var _87=0;for(chatbox in _3c){if(_3c.hasOwnProperty(chatbox)){if(_3c[chatbox]!=null){if(!Number(_3c[chatbox])){_3c[chatbox]=0;}_86+=chatbox+"|"+_3c[chatbox]+",";if(_3c[chatbox]>0){_87=1;}}}}_36=_87;_86=_86.slice(0,-1);_7a("activeChatboxes",_86);};function _88(id,_89,_8a,_8b,_8c,_8d,_8e,_8f){if(id==null||id==""){return;}if(_37[id]==null||_37[id]==""){if(_3e[id]!=1){_3e[id]=1;$.ajax({url:_1+"hfchat_getid.php",data:{userid:id},type:"post",cache:false,dataFilter:function(_90){if(typeof (JSON)!=="undefined"&&typeof (JSON.parse)==="function"){return JSON.parse(_90);}else{return eval("("+_90+")");}},success:function(_91){if(_91){_89=_37[id]=_91.n;_8a=_39[id]=_91.s;_8b=_38[id]=_91.m;_8c=_3a[id]=_91.a;_8d=_3b[id]=_91.l;if(_3d[id]!=null){$("#hfchat_user_"+id+" .hfchat_closebox_bottom_status").removeClass("hfchat_available").removeClass("hfchat_busy").removeClass("hfchat_offline").removeClass("hfchat_away").addClass("hfchat_"+_8a);if($("#hfchat_user_"+id+"_popup").length>0){$("#hfchat_user_"+id+"_popup .hfchat_tabsubtitle .hfchat_message").html(_8b);}}_3e[id]=0;_92(id,_89,_8a,_8b,_8c,_8d,_8e,_8f);}}});}else{setTimeout(function(){_88(id,_37[id],_39[id],_38[id],_3a[id],_3b[id],_8e,_8f);},500);}}else{_92(id,_37[id],_39[id],_38[id],_3a[id],_3b[id],_8e,_8f);}};function _92(id,_93,_94,_95,_96,_97,_98,_99){if(_3d[id]!=null){if(!$("#hfchat_user_"+id).hasClass("hfchat_tabclick")&&_98!=1){if(_28!=""){$("#hfchat_user_"+_28+"_popup").removeClass("hfchat_tabopen");$("#hfchat_user_"+_28).removeClass("hfchat_tabclick").removeClass("hfchat_usertabclick");_28="";_7a("openChatboxId",_28);}if(($("#hfchat_user_"+id).offset().left<($("#hfchat_chatboxes").offset().left+$("#hfchat_chatboxes").width()))&&($("#hfchat_user_"+id).offset().left-$("#hfchat_chatboxes").offset().left)>=0){$("#hfchat_user_"+id).click();}else{$("#hfchat_chatboxes_wide .hfchat_tabalert").css("display","none");var ms=_1e;if(_9a("initialize")==1){ms=0;}$("#hfchat_chatboxes").scrollToCC("#hfchat_user_"+id,ms,function(){$("#hfchat_user_"+id).click();_c9();_b8();});}}_c9();return;}$("#hfchat_chatboxes_wide").width($("#hfchat_chatboxes_wide").width()+152);_bf(1);if(_93.length>_13&&!_43.test(_93)){shortname=_93.substr(0,_13)+"...";}else{shortname=_93;}if(_93.length>_12&&!_43.test(_93)){longname=_93.substr(0,_12)+"...";}else{longname=_93;}$("<span/>").attr("id","hfchat_user_"+id).addClass("hfchat_tab").html("<div class=\"hfchat_user_shortname\">"+shortname+"</div>").appendTo($("#hfchat_chatboxes_wide"));$("#hfchat_user_"+id).append("<div class=\"hfchat_closebox_bottom_status hfchat_"+_94+"\"></div>");$("#hfchat_user_"+id).append("<div class=\"hfchat_closebox_bottom\"></div>");$("#hfchat_user_"+id+" .hfchat_closebox_bottom").mouseenter(function(){$(this).addClass("hfchat_closebox_bottomhover");});$("#hfchat_user_"+id+" .hfchat_closebox_bottom").mouseleave(function(){$(this).removeClass("hfchat_closebox_bottomhover");});$("#hfchat_user_"+id+" .hfchat_closebox_bottom").click(function(){$("#hfchat_user_"+id+"_popup").remove();$("#hfchat_user_"+id).remove();if(_28==id){_28="";_7a("openChatboxId",_28);}$("#hfchat_chatboxes_wide").width($("#hfchat_chatboxes_wide").width()-152);$("#hfchat_chatboxes").scrollToCC("-=152px");_bf();_3c[id]=null;_3d[id]=null;_3f[id]=0;_85();});var _9b="";if(_4.length>0){if(_4.length>8){_9b+="<div style=\"clear:both;padding-bottom:4px\"></div>";}_9b+="<div class=\"hfchat_plugins\">";for(var i=0;i<_4.length;i++){if(_4[i]=="divider"){_9b+="<img src=\""+_1+"themes/"+_7+"/images/divider.png\" class=\"hfchat_pluginsicon_divider\">";}else{var _93="cc"+_4[i];_9b+="<img src=\""+_1+"plugins/"+_4[i]+"/icon.png\" class=\"hfchat_pluginsicon\" title=\""+$[_93].getTitle()+"\" onclick=\"javascript:jqcc."+_93+".init("+id+");\">";}}_9b+="</div>";}var _9c="";var _9d="";if(_97!=""){_9c="<a href=\""+_97+"\">";_9d="</a>";}var _9e="";if(_96!=""){_9e="<div class=\"hfchat_avatarbox\">"+_9c+"<img src=\""+_96+"\" class=\"hfchat_avatar\" />"+_9d+"</div>";}$("<div/>").attr("id","hfchat_user_"+id+"_popup").addClass("hfchat_tabpopup").css("display","none").html("<div class=\"hfchat_tabtitle\"><div class=\"hfchat_name\">"+_9c+longname+_9d+"<span id=\"hfchat_typing_"+id+"\" class=\"hfchat_typing\"></span></div></div><div class=\"hfchat_tabsubtitle\">"+_9e+"<div class=\"hfchat_message\">"+_95+"</div>"+_9b+"<div style=\"clear:both\"></div>"+"</div><div class=\"hfchat_tabcontent\"><div class=\"hfchat_tabcontenttext\" id=\"hfchat_tabcontenttext_"+id+"\"></div><div class=\"hfchat_tabcontentinput\"><textarea class=\"hfchat_textarea\"></textarea><div class=\"hfchat_tabcontentsubmit\"></div></div><div style=\"clear:both\"></div></div>").appendTo($("#hfchat"));$("#hfchat_user_"+id+"_popup .hfchat_textarea").keydown(function(_9f){return _67(_9f,this,id);});$("#hfchat_user_"+id+"_popup .hfchat_tabcontentsubmit").click(function(_a0){return _67(_a0,$("#hfchat_user_"+id+"_popup .hfchat_textarea"),id,1);});$("#hfchat_user_"+id+"_popup .hfchat_textarea").keyup(function(_a1){return _6e(_a1,this,id);});$("#hfchat_user_"+id+"_popup .hfchat_tabtitle").append("<div class=\"hfchat_closebox\"></div><div class=\"hfchat_minimizebox\"></div><br clear=\"all\"/>");$("#hfchat_user_"+id+"_popup .hfchat_tabtitle .hfchat_closebox").mouseenter(function(){$(this).addClass("hfchat_chatboxmouseoverclose");$("#hfchat_user_"+id+"_popup .hfchat_tabtitle .hfchat_minimizebox").removeClass("hfchat_chatboxtraytitlemouseover");});$("#hfchat_user_"+id+"_popup .hfchat_tabtitle .hfchat_closebox").mouseleave(function(){$(this).removeClass("hfchat_chatboxmouseoverclose");$("#hfchat_user_"+id+"_popup .hfchat_tabtitle .hfchat_minimizebox").addClass("hfchat_chatboxtraytitlemouseover");});$("#hfchat_user_"+id+"_popup .hfchat_tabtitle .hfchat_closebox").click(function(){$("#hfchat_user_"+id+"_popup").remove();$("#hfchat_user_"+id).remove();if(_28==id){_28="";_7a("openChatboxId",_28);}$("#hfchat_chatboxes_wide").width($("#hfchat_chatboxes_wide").width()-152);$("#hfchat_chatboxes").scrollToCC("-=152px");_bf();_3d[id]=null;_3c[id]=null;_3f[id]=0;_85();});$("#hfchat_user_"+id+"_popup .hfchat_tabtitle").click(function(){$("#hfchat_user_"+id).click();});$("#hfchat_user_"+id+"_popup .hfchat_tabtitle").mouseenter(function(){$("#hfchat_user_"+id+"_popup .hfchat_tabtitle .hfchat_minimizebox").addClass("hfchat_chatboxtraytitlemouseover");});$("#hfchat_user_"+id+"_popup .hfchat_tabtitle").mouseleave(function(){$("#hfchat_user_"+id+"_popup .hfchat_tabtitle .hfchat_minimizebox").removeClass("hfchat_chatboxtraytitlemouseover");});$("#hfchat_user_"+id).mouseenter(function(){$(this).addClass("hfchat_tabmouseover");$("#hfchat_user_"+id+" div").addClass("hfchat_tabmouseovertext");});$("#hfchat_user_"+id).mouseleave(function(){$(this).removeClass("hfchat_tabmouseover");$("#hfchat_user_"+id+" div").removeClass("hfchat_tabmouseovertext");});$("#hfchat_user_"+id).click(function(){if(_34!=""){$("#hfchat_trayicon_"+_34+"_popup").removeClass("hfchat_tabopen");$("#hfchat_trayicon_"+_34).removeClass("hfchat_trayclick");_34="";_7a("trayOpen",_34);}if($("#hfchat_user_"+id+" .hfchat_tabalert").length>0){$("#hfchat_user_"+id+" .hfchat_tabalert").remove();_3d[id]=0;_3c[id]=0;_85();}if($(this).hasClass("hfchat_tabclick")){$(this).removeClass("hfchat_tabclick").removeClass("hfchat_usertabclick");$("#hfchat_user_"+id+"_popup").removeClass("hfchat_tabopen");$("#hfchat_user_"+id+" .hfchat_closebox_bottom").removeClass("hfchat_closebox_bottom_click");_28="";_7a("openChatboxId",_28);}else{var _a2=$("#hfchat_base").position().left;if(($("#hfchat_user_"+id).offset().left<($("#hfchat_chatboxes").offset().left+$("#hfchat_chatboxes").width()))&&($("#hfchat_user_"+id).offset().left-$("#hfchat_chatboxes").offset().left)>=0){if(_28!=""&&_28!=id){$("#hfchat_user_"+_28+"_popup").removeClass("hfchat_tabopen");$("#hfchat_user_"+_28).removeClass("hfchat_tabclick").removeClass("hfchat_usertabclick");$("#hfchat_user_"+_28+" .hfchat_closebox_bottom").removeClass("hfchat_closebox_bottom_click");_28="";_7a("openChatboxId",_28);}$("#hfchat_user_"+id+"_popup").css("left",_a2+$("#hfchat_user_"+id).position().left-77).css("bottom","24px");$(this).addClass("hfchat_tabclick").addClass("hfchat_usertabclick");$("#hfchat_user_"+id+"_popup").addClass("hfchat_tabopen");$("#hfchat_user_"+id+" .hfchat_closebox_bottom").addClass("hfchat_closebox_bottom_click");_28=id;_7a("openChatboxId",_28);if(_3f[id]!=1&&_9a("initialize")!=1){_ac(id);_3f[id]=1;}if(ie6){_5e();}}else{$("#hfchat_user_"+id+"_popup").removeClass("hfchat_tabopen");$("#hfchat_user_"+id).removeClass("hfchat_tabclick").removeClass("hfchat_usertabclick");var _a3=(($("#hfchat_user_"+id).offset().left-$("#hfchat_chatboxes_wide").offset().left))-((Math.floor(($("#hfchat_chatboxes").width()/152))-1)*152);$("#hfchat_chatboxes").scrollToCC(_a3,0,function(){_b8();_c9();$("#hfchat_user_"+id).click();});}$("#hfchat_tabcontenttext_"+id).scrollTop(50000);setTimeout(function(){$("#hfchat_tabcontenttext_"+id).scrollTop(50000);},100);}if(_a4("updatingsession")!=1){$("#hfchat_user_"+id+"_popup .hfchat_textarea").focus();}});if(_98!=1){$("#hfchat_user_"+id).click();}_3c[id]=0;_3d[id]=0;_85();};function _a5(ts){var ap="";var _a6=ts.getHours();var _a7=ts.getMinutes();var _a8=ts.getDate();var _a9=ts.getMonth();if(_1d!=1){if(_a6>11){ap="pm";}else{ap="am";}if(_a6>12){_a6=_a6-12;}if(_a6==0){_a6=12;}}else{if(_a6<10){_a6="0"+_a6;}}if(_a7<10){_a7="0"+_a7;}var _aa=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var _ab="th";if(_a8==1||_a8==21||_a8==31){_ab="st";}else{if(_a8==2||_a8==22){_ab="nd";}else{if(_a8==3||_a8==23){_ab="rd";}}}if(_a8!=_41){return "<span class=\"hfchat_ts\">("+_a6+":"+_a7+ap+" "+_a8+_ab+" "+_aa[_a9]+")</span>";}else{return "<span class=\"hfchat_ts\">("+_a6+":"+_a7+ap+")</span>";}};function _ac(id){$.ajax({cache:false,url:_1+"hfchat_receive.php",data:{chatbox:id},type:"post",dataFilter:function(_ad){if(typeof (JSON)!=="undefined"&&typeof (JSON.parse)==="function"){return JSON.parse(_ad);}else{return eval("("+_ad+")");}},success:function(_ae){if(_ae){var _af="";var _b0=_37[id];$.each(_ae,function(_b1,_b2){if(_b1=="messages"){$.each(_b2,function(i,_b3){var _b4="";if(_b3.self==1){fromname=_2[10];_b4=" hfchat_self";}else{fromname=_b0;}var ts=new Date(_b3.sent*1000);if(!_10&&fromname.indexOf(" ")!=-1){fromname=fromname.slice(0,fromname.indexOf(" "));}_af+=(_128("<div class=\"hfchat_chatboxmessage\" id=\"hfchat_message_"+_b3.id+"\"><span class=\"hfchat_chatboxmessagefrom"+_b4+"\"><strong>"+fromname+"</strong>:&nbsp;&nbsp;</span><span class=\"hfchat_chatboxmessagecontent"+_b4+"\">"+_b3.message+"</span>"+_a5(ts)+"</div>",_b4));});}});if($("hfchat_tabcontenttext_"+id).length>0){_134("hfchat_tabcontenttext_"+id,"<div>"+_af+"</div>"+document.getElementById("hfchat_tabcontenttext_"+id).innerHTML);}else{document.getElementById("hfchat_tabcontenttext_"+id).innerHTML="<div>"+_af+"</div>";}$("#hfchat_tabcontenttext_"+id).scrollTop(50000);setTimeout(function(){$("#hfchat_tabcontenttext_"+id).scrollTop(50000);},100);}}});};function _b5(id,_b6,add){if(_37[id]==null||_37[id]==""){setTimeout(function(){_b5(id,_b6,add);},500);}else{_b7(id);if(add==1){if($("#hfchat_user_"+id+" .hfchat_tabalert").length>0){_b6=parseInt($("#hfchat_user_"+id+" .hfchat_tabalert").html())+parseInt(_b6);}}if(_b6==0){$("#hfchat_user_"+id+" .hfchat_tabalert").remove();}else{if($("#hfchat_user_"+id+" .hfchat_tabalert").length>0){$("#hfchat_user_"+id+" .hfchat_tabalert").html(_b6);}else{$("<div/>").css("top","-5px").addClass("hfchat_tabalert").html(_b6).appendTo($("#hfchat_user_"+id+" .hfchat_closebox_bottom_status"));}}_3c[id]=_b6;_85();_b8();}};function _b9(){$("#hfchat_search").click(function(){var _ba=$(this).val();if(_ba==_2[18]){$("#hfchat_search").val("");$("#hfchat_search").addClass("hfchat_search_light");}});$("#hfchat_search").blur(function(){var _bb=$(this).val();if(_bb==""){$("#hfchat_search").addClass("hfchat_search_light");$("#hfchat_search").val(_2[18]);}});$("#hfchat_search").keyup(function(){var _bc=$(this).val();if(_bc.length>0&&_bc!=_2[18]){$("#hfchat_userscontent .hfchat_userlist").hide();$("#hfchat_userscontent .hfchat_userlist:icontains("+_bc+")").show();$("#hfchat_search").removeClass("hfchat_search_light");}else{$("#hfchat_userscontent .hfchat_userlist").show();}});$("#hfchat_userstab_popup .hfchat_userstabtitle").click(function(){$("#hfchat_userstab").click();});$("#hfchat_userstab_popup .hfchat_userstabtitle").mouseenter(function(){$("#hfchat_userstab_popup .hfchat_userstabtitle .hfchat_minimizebox").addClass("hfchat_chatboxtraytitlemouseover");});$("#hfchat_userstab_popup .hfchat_userstabtitle").mouseleave(function(){$("#hfchat_userstab_popup .hfchat_userstabtitle .hfchat_minimizebox").removeClass("hfchat_chatboxtraytitlemouseover");});$("#hfchat_userstab").mouseover(function(){$(this).addClass("hfchat_tabmouseover");});$("#hfchat_userstab").mouseout(function(){$(this).removeClass("hfchat_tabmouseover");});$("#hfchat_userstab").click(function(){if(_34!=""){$("#hfchat_trayicon_"+_34+"_popup").removeClass("hfchat_tabopen");$("#hfchat_trayicon_"+_34).removeClass("hfchat_trayclick");_34="";_7a("trayOpen",_34);}if(_2a==1){_2a=0;$("#hfchat_userstab_text").html(_2[9]+" ("+_33+")");_6d();$("#hfchat_optionsbutton_popup .available").click();}$("#hfchat_optionsbutton_popup").removeClass("hfchat_tabopen");$("#hfchat_optionsbutton").removeClass("hfchat_tabclick");if($(this).hasClass("hfchat_tabclick")){_7a("buddylist","0");}else{_7a("buddylist","1");$("#hfchat_tooltip").css("display","none");}var _bd=$("#hfchat_base").position().left;var _be=jqcc("#hfchat_base").width();$("#hfchat_userstab_popup").css("left",_bd+_be-223-32).css("bottom","24px");$(this).toggleClass("hfchat_tabclick").toggleClass("hfchat_userstabclick");$("#hfchat_userstab_popup").toggleClass("hfchat_tabopen");});};function _bf(_c0){var _c1=$(window).width();var _c2=_24+32;if(_c2<80){_c2=80;}if(_b=="fixed"){$("#hfchat_base").css("width",_c);if(_d=="center"){var _c3=(_c1-_c)/2;$("#hfchat_base").css("left",_c3);}if(_d=="right"){var _c3=(_c1-_c);$("#hfchat_base").css("left",_c3-_e);}if(_d=="left"){$("#hfchat_base").css("left",_e);}}else{if(_c1<400+_c2+_e+20){_c1=400+_c2+_e+20;}$("#hfchat_base").css("left",_e);$("#hfchat_base").css("width",_c1-(_e*2));}var _c4=$("#hfchat_base").position().left;var _c5=$("#hfchat_base").width();$("#hfchat_userstab_popup").css("left",_c4+_c5-223-32).css("bottom","24px");$("#hfchat_optionsbutton_popup").css("left",_c4+_c5-223-32).css("bottom","24px");if(_34!=""){$("#hfchat_trayicon_"+_34+"_popup").css("left",$("#hfchat_trayicon_"+_34).offset().left).css("bottom","24px").css("width",_3[_34][4]);}if($("#hfchat_chatboxes_wide").width()<=($("#hfchat_base").width()-26-178-44-_c2)){$("#hfchat_chatboxes").css("width",$("#hfchat_chatboxes_wide").width());$("#hfchat_chatboxes").scrollToCC("0px",0);}else{var _c6=$("#hfchat_chatboxes").width();$("#hfchat_chatboxes").css("width",Math.floor(($("#hfchat_base").width()-26-178-44-_c2)/152)*152);var _c7=$("#hfchat_chatboxes").width();if(_c6!=_c7){$("#hfchat_chatboxes").scrollToCC("-=152px",0);}}if(_28!=""&&_c0!=1){if(($("#hfchat_user_"+_28).offset().left<($("#hfchat_chatboxes").offset().left+$("#hfchat_chatboxes").width()))&&($("#hfchat_user_"+_28).offset().left-$("#hfchat_chatboxes").offset().left)>=0){$("#hfchat_user_"+_28+"_popup").css("left",_c4+$("#hfchat_user_"+_28).position().left-77).css("bottom","24px");}else{$("#hfchat_user_"+_28+"_popup").removeClass("hfchat_tabopen");$("#hfchat_user_"+_28).removeClass("hfchat_tabclick").removeClass("hfchat_usertabclick");var _c8=(($("#hfchat_user_"+_28).offset().left-$("#hfchat_chatboxes_wide").offset().left))-((Math.floor(($("#hfchat_chatboxes").width()/152))-1)*152);$("#hfchat_chatboxes").scrollToCC(_c8,0,function(){$("#hfchat_user_"+_28).click();});}}_b8(_c0);_c9(_c0);if(ie6){_5e();}};function _b8(_ca){$("#hfchat_chatbox_left .hfchat_tabalertlr").html("0");$("#hfchat_chatbox_right .hfchat_tabalertlr").html("0");$("#hfchat_chatbox_left .hfchat_tabalertlr").css("display","none");$("#hfchat_chatbox_right .hfchat_tabalertlr").css("display","none");$("#hfchat_chatboxes_wide  .hfchat_tabalert").each(function(){if(($(this).parent().offset().left<($("#hfchat_chatboxes").offset().left+$("#hfchat_chatboxes").width()))&&($(this).parent().offset().left-$("#hfchat_chatboxes").offset().left)>=0){$(this).css("display","block");}else{$(this).css("display","none");if(($(this).parent().offset().left-$("#hfchat_chatboxes").offset().left)>=0){$("#hfchat_chatbox_right .hfchat_tabalertlr").html(parseInt($("#hfchat_chatbox_right .hfchat_tabalertlr").html())+parseInt($(this).html()));$("#hfchat_chatbox_right .hfchat_tabalertlr").css("display","block");}else{$("#hfchat_chatbox_left .hfchat_tabalertlr").html(parseInt($("#hfchat_chatbox_left .hfchat_tabalertlr").html())+parseInt($(this).html()));$("#hfchat_chatbox_left .hfchat_tabalertlr").css("display","block");}}});};function _c9(_cb){var _cc=0;var _cd=0;var _ce=0;if($("#hfchat_chatbox_right").hasClass("hfchat_chatbox_right_last")){_cd=1;}if($("#hfchat_chatbox_right").hasClass("hfchat_chatbox_lr")){_ce=1;}if($("#hfchat_chatboxes").scrollLeft()==0){$("#hfchat_chatbox_left").unbind("click",_cf);$("#hfchat_chatbox_left .hfchat_tabtext").html("0");$("#hfchat_chatbox_left").addClass("hfchat_chatbox_left_last");_cc++;}else{var _d0=Math.floor($("#hfchat_chatboxes").scrollLeft()/152);$("#hfchat_chatbox_left").unbind("click",_cf);$("#hfchat_chatbox_left").bind("click",_cf);$("#hfchat_chatbox_left .hfchat_tabtext").html(_d0);$("#hfchat_chatbox_left").removeClass("hfchat_chatbox_left_last");}if(($("#hfchat_chatboxes").scrollLeft()+$("#hfchat_chatboxes").width())==$("#hfchat_chatboxes_wide").width()){$("#hfchat_chatbox_right").unbind("click",_d1);$("#hfchat_chatbox_right .hfchat_tabtext").html("0");$("#hfchat_chatbox_right").addClass("hfchat_chatbox_right_last");_cc++;}else{var _d0=Math.floor(($("#hfchat_chatboxes_wide").width()-($("#hfchat_chatboxes").scrollLeft()+$("#hfchat_chatboxes").width()))/152);$("#hfchat_chatbox_right").unbind("click",_d1);$("#hfchat_chatbox_right").bind("click",_d1);$("#hfchat_chatbox_right .hfchat_tabtext").html(_d0);$("#hfchat_chatbox_right").removeClass("hfchat_chatbox_right_last");}if(_cc==2){$("#hfchat_chatbox_right").addClass("hfchat_chatbox_lr");$("#hfchat_chatbox_left").addClass("hfchat_chatbox_lr");}else{$("#hfchat_chatbox_right").removeClass("hfchat_chatbox_lr");$("#hfchat_chatbox_left").removeClass("hfchat_chatbox_lr");}if((!$("#hfchat_chatbox_right").hasClass("hfchat_chatbox_right_last")&&_cd==1)||($("#hfchat_chatbox_right").hasClass("hfchat_chatbox_right_last")&&_cd==0)||(!$("#hfchat_chatbox_right").hasClass("hfchat_chatbox_lr")&&_ce==1)||($("#hfchat_chatbox_right").hasClass("hfchat_chatbox_lr")&&_ce==0)){_bf(_cb);}};function _d2(_d3){if(_28!=""){$("#hfchat_user_"+_28+"_popup").removeClass("hfchat_tabopen");$("#hfchat_user_"+_28).removeClass("hfchat_tabclick").removeClass("hfchat_usertabclick");}$("#hfchat_chatboxes_wide .hfchat_tabalert").css("display","none");var _d4=$("#hfchat_base").position().left;var ms=_1e;if(_9a("initialize")==1){ms=0;}$("#hfchat_chatboxes").scrollToCC(_d3,ms,function(){if(_28!=""){if(($("#hfchat_user_"+_28).offset().left<($("#hfchat_chatboxes").offset().left+$("#hfchat_chatboxes").width()))&&($("#hfchat_user_"+_28).offset().left-$("#hfchat_chatboxes").offset().left)>=0){$("#hfchat_user_"+_28).click();}else{_28="";}_7a("openChatboxId",_28);}_b8();_c9();});};function _cf(){_d2("-=152px");};function _d1(){_d2("+=152px");};function _d5(_d6,_d7){_25[_d6]=_d7;};function _9a(_d8){if(_25[_d8]){return _25[_d8];}else{return "";}};function _d9(_da,_db){_27[_da]=_db;};function _a4(_dc){if(_27[_dc]){return _27[_dc];}else{return "";}};function _7a(_dd,_de){_26[_dd]=_de;if(_a4("updatingsession")!=1){var _df="";if(_26["buddylist"]){_df+=_26["buddylist"];}else{_df+=" ";}_df+=":";if(_26["activeChatboxes"]){_df+=_26["activeChatboxes"];}else{_df+=" ";}_df+=":";if(_26["openChatboxId"]){_df+=_26["openChatboxId"];}else{_df+=" ";}_df+=":"+_33;_df+=":"+_2a;_df+=":"+_34;$.cookie(_a+"state",_df,{path:"/"});}};function _e0(_e1,_e2){if(_26[_e1]){return _26[_e1];}else{return "";}};function _e3(_e4){var id=$(_e4).attr("id").substr(16);if(id==""){id=$(_e4).parent().attr("id").substr(16);}_88(id,_37[id],_39[id],_38[id],_3a[id],_3b[id]);};function _e5(id){_88(id,_37[id],_39[id],_38[id],_3a[id],_3b[id]);};function _b7(_e6){var id=_e6;_88(id,_37[id],_39[id],_38[id],_3a[id],_3b[id],1);};function _e7(id,_e8,_e9,old,_ea,_eb,_ec){if(_3e[id]!=1){_88(id,_37[id],_39[id],_38[id],_3a[id],_3b[id],1,1);}if(_37[id]==null||_37[id]==""){setTimeout(function(){_e7(id,_e8,_e9,old,_ea,_eb,_ec);},500);}else{var _ed="";if(parseInt(_e9)==1){fromname=_2[10];_ed=" hfchat_self";}else{fromname=_37[id];}if(parseInt(_eb)==1){_e8=_e8.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/\"/g,"&quot;");}if(_e9!=1&&_6==1){if($.cookie(_a+"sound")&&$.cookie(_a+"sound")=="true"){}else{if(old!=1){_57();}}}separator=":&nbsp;&nbsp;";if($("#hfchat_message_"+_ea).length>0){$("#hfchat_message_"+_ea+" .hfchat_chatboxmessagecontent").html(_e8);}else{sentdata="";if(_ec!=null){var ts=new Date(_ec*1000);sentdata=_a5(ts);}if(!_10&&fromname.indexOf(" ")!=-1){fromname=fromname.slice(0,fromname.indexOf(" "));}$("#hfchat_user_"+id+"_popup .hfchat_tabcontenttext").append(_128("<div class=\"hfchat_chatboxmessage\" id=\"hfchat_message_"+_ea+"\"><span class=\"hfchat_chatboxmessagefrom"+_ed+"\"><strong>"+fromname+"</strong>"+separator+"</span><span class=\"hfchat_chatboxmessagecontent"+_ed+"\">"+_e8+"</span>"+sentdata+"</div>",_ed));$("#hfchat_typing_"+id).css("display","none");$("#hfchat_tabcontenttext_"+id).scrollTop(50000);setTimeout(function(){$("#hfchat_tabcontenttext_"+id).scrollTop(50000);},100);var _ee=new Date();var _ef=Math.floor(_ee.getTime()/1000)-_46;if(_ef>5){if(_4d==""){document.title=_2[15];}}}if(_28!=id&&old!=1){_b5(id,1,1);}}};function _f0(id){if(_37[id]==null||_37[id]==""){setTimeout(function(){_f0(id);},500);}else{if(_28!=id){$("#hfchat_user_"+id).click();}}};function _f1(id){if(_37[id]==null||_37[id]==""){setTimeout(function(){_f1(id);},500);}else{$("#hfchat_user_"+id).click();}};function _f2(id,_f3,_f4){if(_37[id]==null||_37[id]==""){setTimeout(function(){_f2(id,_f3,_f4);},500);}else{$("#hfchat_tabcontenttext_"+id).append("<div>"+_f3+"</div>");$("#hfchat_tabcontenttext_"+id).scrollTop(50000);$("#hfchat_typing_"+id).css("display","none");setTimeout(function(){$("#hfchat_tabcontenttext_"+id).scrollTop(50000);},100);_3d[id]=1;if(_f4==1){var _f5=new Date();var _f6=Math.floor(_f5.getTime()/1000)-_46;if(_f6>5){if(_4d==""){document.title=_2[15];}}}if($.cookie(_a+"sound")&&$.cookie(_a+"sound")=="true"){}else{if(_f==1&&_f4==1){_57();}}}};function _6d(){_25["timestamp"]=_32;_25["typingto"]=_44;_25["blh"]=_4b;_25["status"]="";var _f7="";var _f8={};var _f9={};_f8["available"]="";_f8["busy"]="";_f8["offline"]="";_f8["away"]="";_f9["available"]="";_f9["busy"]="";_f9["offline"]="";_f9["away"]="";var _fa=0;var _fb=new Date();var _fc=Math.floor(_fb.getTime()/1000)-_46;if(_fc>_17&&_47==0){if(_4a=="available"||_4a=="busy"){_47=1;_25["status"]="away";_74();$("#hfchat_userstab_icon").addClass("hfchat_user_away2");}}if(_fc<_17&&_47==1){if(_4a=="available"||_4a=="busy"){_47=0;_25["status"]=_4a;_74();$("#hfchat_userstab_icon").addClass("hfchat_user_"+_4a+"2");}}$.ajax({url:_1+"hfchat_receive.php",data:_25,type:"post",cache:false,dataFilter:function(_fd){if(typeof (JSON)!=="undefined"&&typeof (JSON.parse)==="function"){return JSON.parse(_fd);}else{return eval("("+_fd+")");}},success:function(_fe){if(_fe){var _ff=0;var _100="";$.each(_fe,function(type,item){if(type=="blh"){_4b=item;}if(type=="an"){if($.cookie(_a+"popup")&&$.cookie(_a+"popup")=="true"){}else{_49=100;_58("hfchat_userstab","<div class=\"hfchat_announcement\">"+item.m+"</div>",0);$.cookie(_a+"an",item.id,{path:"/",expires:365});clearTimeout(_48);_48=setTimeout(function(){$("#hfchat_tooltip").css("display","none");_49=0;},_1c);}}if(type=="buddylist"){var _101=0;var _102=0;$.each(item,function(i,_103){if(_103.n.length>_12&&!_43.test(_103.n)){longname=_103.n.substr(0,_12)+"...";}else{longname=_103.n;}if(_3d[_103.id]!=null){$("#hfchat_user_"+_103.id+" .hfchat_closebox_bottom_status").removeClass("hfchat_available").removeClass("hfchat_busy").removeClass("hfchat_offline").removeClass("hfchat_away").addClass("hfchat_"+_103.s);if($("#hfchat_user_"+_103.id+"_popup").length>0){$("#hfchat_user_"+_103.id+"_popup .hfchat_tabsubtitle .hfchat_message").html(_103.m);}}if(_103.s=="available"){_101++;}_102++;_f8[_103.s]+="<div id=\"hfchat_userlist_"+_103.id+"\" class=\"hfchat_userlist\" onmouseover=\"jqcc(this).addClass('hfchat_userlist_hover');\" onmouseout=\"jqcc(this).removeClass('hfchat_userlist_hover');\"><span class=\"hfchat_userscontentname\">"+longname+"</span><span class=\"hfchat_userscontentdot hfchat_"+_103.s+"\"></span></div>";_f9[_103.s]+="<div id=\"hfchat_userlist_"+_103.id+"\" class=\"hfchat_userlist\" onmouseover=\"jqcc(this).addClass('hfchat_userlist_hover');\" onmouseout=\"jqcc(this).removeClass('hfchat_userlist_hover');\"><span class=\"hfchat_userscontentavatar\"><img class=\"hfchat_userscontentavatarimage\" src=\""+_103.a+"\"></span><span class=\"hfchat_userscontentname\">"+longname+"</span><span class=\"hfchat_userscontentdot hfchat_"+_103.s+"\"></span></div>";var _104="";if(_19==1&&_9a("initialize")!=1&&_39[_103.id]!="available"&&_39[_103.id]!="busy"&&_39[_103.id]!="away"&&_103.s=="available"){_104=_2[19];}if(_1a==1&&_9a("initialize")!=1&&_39[_103.id]!="available"&&_39[_103.id]!="busy"&&_39[_103.id]!="away"&&_103.s=="busy"){_104=_2[21];}if(_18==1&&_9a("initialize")!=1&&_39[_103.id]!="offline"&&_103.s=="offline"){_104=_2[20];}if(_104!=""){_100+="<div class=\"hfchat_notification\" onclick=\"javascript:jqcc.hfchat.chatWith('"+_103.id+"')\"><div class=\"hfchat_notification_avatar\"><img class=\"hfchat_notification_avatar_image\" src=\""+_103.a+"\"></div><div class=\"hfchat_notification_message\">"+_103.n+_104+"<br/><span class=\"hfchat_notification_status\">"+_103.m+"</span></div><div style=\"clear:both\" /></div>";}_39[_103.id]=_103.s;_38[_103.id]=_103.m;_37[_103.id]=_103.n;_3a[_103.id]=_103.a;_3b[_103.id]=_103.l;});var _105=_f9;if(_102>_15){_105=_f8;}for(buddystatus in _105){if(_105.hasOwnProperty(buddystatus)){if(_105[buddystatus]==""){document.getElementById("hfchat_userslist_"+buddystatus).style.display="none";}else{document.getElementById("hfchat_userslist_"+buddystatus).style.display="block";_134("hfchat_userslist_"+buddystatus,"<div>"+_105[buddystatus]+"</div>");}}}$("#hfchat_search").keyup();$(".hfchat_userlist").unbind("click");$(".hfchat_userlist").bind("click",function(e){_e3(e.target);});$("#hfchat_userstab_text").html(_2[9]+" ("+_101+")");_33=_101;if(_102==0){document.getElementById("hfchat_userslist_available").style.display="block";$("#hfchat_userslist_available").html("<div class=\"hfchat_nofriends\">"+_2[14]+"</div>");}if(_102>_14){$("#hfchat_searchbar").css("display","block");}else{$("#hfchat_searchbar").css("display","none");}if(_100!=""&&!$("#hfchat_userstab_popup").hasClass("hfchat_tabopen")&&!$("#hfchat_optionsbutton_popup").hasClass("hfchat_tabopen")){if(_49<10){if($.cookie(_a+"popup")&&$.cookie(_a+"popup")=="true"){}else{_49=10;_58("hfchat_userstab",_100,0);clearTimeout(_48);_48=setTimeout(function(){$("#hfchat_tooltip").css("display","none");_49=0;},_1b);}}}if(_4d!=""){jqcc[_4d].updateBuddyList(item);}}if(type=="loggedout"){$.cookie(_a+"loggedin","0",{path:"/"});$("#hfchat_optionsbutton").addClass("hfchat_optionsimages_exclamation");$("#hfchat_userstab").hide();$("#hfchat_chatboxes").hide();$("#hfchat_chatbox_left").hide();$("#hfchat_chatbox_right").hide();$("#hfchat_optionsbutton_popup").removeClass("hfchat_tabopen");$("#hfchat_userstab_popup").removeClass("hfchat_tabopen");$("#hfchat_optionsbutton").removeClass("hfchat_tabclick");$("#hfchat_userstab").removeClass("hfchat_tabclick");if(_28!=""){$("#hfchat_user_"+_28+"_popup").removeClass("hfchat_tabopen");_28="";_7a("openChatboxId",_28);}_29=1;if(_4d!=""){jqcc[_4d].loggedOut();}}if(type=="userstatus"){$.each(item,function(name,_106){if(name=="message"){$("#hfchat_optionsbutton_popup .hfchat_statustextarea").val(_106);}if(name=="status"){_4a=_106;if(_106=="offline"){_78(1);}else{_73();$("#hfchat_userstab_icon").addClass("hfchat_user_"+_106+"2");$("#hfchat_optionsbutton_popup ."+_106).css("text-decoration","underline");}}});}if(type=="cometid"){_50=item.td;COMET.subscribe({channel:item.id},function(_107){if(_4d!=""){jqcc[_4d].newMessage(_107);}var ts=Math.round(new Date().getTime()/1000)+""+Math.floor(Math.random()*1000000);_e7(_107.from,_107.message,_107.self,0,ts,0,_107.sent+_50);});}if(type=="initialize"){_32=item;_118();}if(type=="tt"){$(".hfchat_typing").css("display","none");var _108=item.split(",");var t=_108.length;while(t>-1){$("#hfchat_typing_"+_108[t]).css("display","block");t--;}}if(type=="messages"){if(_4d!=""){jqcc[_4d].newMessages(item);}$.each(item,function(i,_109){_32=_109.id;if((_28)==(_109.from)&&_37[_109.from]!=""&&_37[_109.from]!=null){++_ff;var name=_37[_109.from];var _10a="";if(_109.self==1){fromname=_2[10];_10a=" hfchat_self";}else{fromname=name;}if($("#hfchat_message_"+_109.id).length>0){$("#hfchat_message_"+_109.id+" .hfchat_chatboxmessagecontent").html(_109.message);}else{var ts=new Date(_109.sent*1000);if(!_10&&fromname.indexOf(" ")!=-1){fromname=fromname.slice(0,fromname.indexOf(" "));}_f7+=(_128("<div class=\"hfchat_chatboxmessage\" id=\"hfchat_message_"+_109.id+"\"><span class=\"hfchat_chatboxmessagefrom"+_10a+"\"><strong>"+fromname+"</strong>:&nbsp;&nbsp;</span><span class=\"hfchat_chatboxmessagecontent"+_10a+"\">"+_109.message+"</span>"+_a5(ts)+"</div>",_10a));if(_109.old==0&&_109.self==0){_fa=1;}}}else{var _10b=0;if($("#hfchat_user_"+_109.from).length>0){}else{_10b=1;}_e7(_109.from,_109.message,_109.self,_109.old,_109.id,0,_109.sent);if(_28==""&&_5==1&&_10b==1){_f0(_109.from);}}});_30=1;_2f=_8;}});if(_28!=""&&_ff>0){_f2(_28,_f7,_fa);}}_d5("initialize","0");_d5("currenttime","0");if(_29!=1&&_2a!=1){_30++;if(_30>4){_2f*=2;_30=1;}if(_2f>_9){_2f=_9;}clearTimeout(_2d);_2d=setTimeout(function(){_6d();},_2f);}}});};function _10c(){_2[1]="";};function _10d(){$("body").append("<div id=\"hfchat\"></div><div id=\"hfchat_hidden\"><div id=\"hfchat_hidden_content\"></div></div><div id=\"hfchat_tooltip\"><div class=\"hfchat_tooltip_content\"></div></div>");var _10e="";var _10f="";for(x in _3){if(_3.hasOwnProperty(x)){var icon=_3[x];_10e+=("<div id=\"hfchat_trayicon_"+x+"\" class=\"hfchat_trayicon\"><img src=\""+_1+"modules/"+icon[0]+"/icon.png\"></div>");if(icon[3]=="_popup"){_10f+="<div id=\"hfchat_trayicon_"+x+"_popup\" class=\"hfchat_traypopup\" style=\"display:none\"><div class=\"hfchat_traytitle\"><div class=\"hfchat_name\">"+icon[1]+"</div><div class=\"hfchat_minimizebox\"></div><br clear=\"all\"/></div><div class=\"hfchat_traycontent\"><div class=\"hfchat_traycontenttext\"><iframe  allowtransparency=\"true\" frameborder=0 width=\""+icon[4]+"\" height=\""+icon[5]+"\" id=\"hfchat_trayicon_"+x+"_iframe\"></iframe></div></div></div>";}if(!isNaN(icon[6])&&Number(icon[6])>0){_24+=Number(icon[6]);}else{_24+=16;}_24+=18;}}var _110=$.cookie(_a+"state");var _111=0;if(_110!=null){var _112=_110.split(/:/);_111=_112[3];}var _113="<div id=\"hfchat_trayicons\">"+_10f+"</div><div id=\"hfchat_base\"><div id=\"hfchat_hide\" onclick=\"jqcc.hfchat.hideBar();\"></div><span id=\"hfchat_optionsbutton\" class=\"hfchat_tab hfchat_optionsimages\"></span><div id=\"hfchat_trayicons\">"+_10e+"</div><span id=\"hfchat_userstab\" class=\"hfchat_tab\"><span id=\"hfchat_userstab_icon\"></span><span id=\"hfchat_userstab_text\">"+_2[9]+" ("+_111+")</span></span><div id=\"hfchat_chatbox_right\"><span class=\"hfchat_tabtext\"></span><span style=\"top:-5px;display:none\" class=\"hfchat_tabalertlr\"></span></div><div id=\"hfchat_chatboxes\"><div id=\"hfchat_chatboxes_wide\"></div></div><div id=\"hfchat_chatbox_left\"><span class=\"hfchat_tabtext\"></span><span class=\"hfchat_tabalertlr\" style=\"top:-5px;display:none;\"></span></div></div><div id=\"hfchat_optionsbutton_popup\" class=\"hfchat_tabpopup\" style=\"display:none\"><div class=\"hfchat_userstabtitle\"><div class=\"hfchat_userstabtitletext\">"+_2[0]+"</div><div class=\"hfchat_minimizebox\"></div><br clear=\"all\"/></div><div class=\"hfchat_tabsubtitle\">"+_2[1]+"</div><div class=\"hfchat_tabcontent hfchat_optionstyle\"><strong>"+_2[2]+"</strong><br/><textarea class=\"hfchat_statustextarea\"></textarea><br/><input type=\"button\" class=\"hfchat_statusbutton\" value=\""+_2[22]+"\"><br/><div class=\"hfchat_statusinputs\"><strong>"+_2[23]+"</strong><br/><span class=\"hfchat_user_available\"></span><span class=\"hfchat_optionsstatus available\">"+_2[3]+"</span><span class=\"hfchat_optionsstatus2 hfchat_user_invisible\" ></span><span class=\"hfchat_optionsstatus invisible\">"+_2[5]+"</span><div style=\"clear:both\"></div><span class=\"hfchat_optionsstatus2 hfchat_user_busy\"></span><span class=\"hfchat_optionsstatus busy\">"+_2[4]+"</span><span class=\"hfchat_optionsstatus2 hfchat_user_invisible\"></span><span class=\"hfchat_optionsstatus hfchat_gooffline\">"+_2[11]+"</span><br clear=\"all\"/></div><div style=\"border-top:1px solid #eeeeee;margin-top:10px;padding-top:4px;\"><div><input type=\"checkbox\" id=\"hfchat_soundnotifications\" style=\"vertical-align: -2px;\">"+_2[13]+"</div><div><input type=\"checkbox\" id=\"hfchat_popupnotifications\" style=\"vertical-align: -2px;\">"+_2[24]+"</div></div><div class=\"hfchat_hidebartext\"><div><a href=\"javascript:void(0);\" id=\"hfchat_hidebar\">"+_2[25]+"</a></div></div></div></div><div id=\"hfchat_userstab_popup\" class=\"hfchat_tabpopup\" style=\"display:none\"><div class=\"hfchat_userstabtitle\"><div class=\"hfchat_userstabtitletext\">"+_2[9]+"</div><div class=\"hfchat_minimizebox\"></div><br clear=\"all\"/></div><div class=\"hfchat_tabsubtitle\" id=\"hfchat_searchbar\"><input type=\"text\" name=\"hfchat_search\" class=\"hfchat_search hfchat_search_light\" id=\"hfchat_search\" value=\""+_2[18]+"\"></div><div class=\"hfchat_tabcontent hfchat_tabstyle\"><div id=\"hfchat_userscontent\"><div id=\"hfchat_userslist_available\"></div><div id=\"hfchat_userslist_busy\"></div><div id=\"hfchat_userslist_away\"></div><div id=\"hfchat_userslist_offline\"></div></div></div></div>";document.getElementById("hfchat").innerHTML=_113;_7b();_b9();$("#hfchat_chatboxes").attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false;});$("#hfchat_userscontent").attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false;});$("#hfchat_hidebar").click(function(){_78();$("#hfchat").css("display","none");$("#hfchat_hidden").css("display","block");$.cookie(_a+"hidebar","1",{path:"/",expires:365});});$("#hfchat_hidden").click(function(){$("#hfchat").css("display","block");$("#hfchat_hidden").css("display","none");$.cookie(_a+"hidebar","0",{path:"/",expires:365});if(_29==0){clearTimeout(_2d);_6d();}});$("#hfchat_hidden").mouseover(function(){if(_49==0){_58("hfchat_hidden_content",_2[26],0);}$(this).addClass("hfchat_tabmouseover");});$("#hfchat_hidden").mouseout(function(){$(this).removeClass("hfchat_tabmouseover");if(_49==0){$("#hfchat_tooltip").css("display","none");}});$("#hfchat_hide").mouseover(function(){if(_49==0){_58("hfchat_hide",_2[27],0);}$(this).addClass("hfchat_tabmouseover");});$("#hfchat_hide").mouseout(function(){$(this).removeClass("hfchat_tabmouseover");if(_49==0){$("#hfchat_tooltip").css("display","none");}});$("#hfchat .hfchat_trayicon").mouseover(function(){var id=$(this).attr("id").substr(16);if(_49==0){_58("hfchat_trayicon_"+id,_3[id][1],1);}$(this).addClass("hfchat_tabmouseover");});$("#hfchat .hfchat_trayicon").mouseout(function(){$(this).removeClass("hfchat_tabmouseover");if(_49==0){$("#hfchat_tooltip").css("display","none");}});$("#hfchat .hfchat_traytitle").mouseenter(function(){var id=$(this).parent().attr("id");id=id.substring(19,id.length-6);$("#hfchat_trayicon_"+id+"_popup .hfchat_traytitle .hfchat_minimizebox").addClass("hfchat_chatboxtraytitlemouseover");});$("#hfchat .hfchat_traytitle").mouseleave(function(){var id=$(this).parent().attr("id");id=id.substring(19,id.length-6);$("#hfchat_trayicon_"+id+"_popup .hfchat_traytitle .hfchat_minimizebox").removeClass("hfchat_chatboxtraytitlemouseover");});$("#hfchat .hfchat_traytitle").click(function(){var id=$(this).parent().attr("id");id=id.substring(19,id.length-6);$("#hfchat_trayicon_"+id).click();});$("#hfchat .hfchat_trayicon").click(function(){var id=$(this).attr("id").substr(16);_126(id,0);if(_28!=""){$("#hfchat_user_"+_28+"_popup").removeClass("hfchat_tabopen");$("#hfchat_user_"+_28).removeClass("hfchat_tabclick").removeClass("hfchat_usertabclick");$("#hfchat_user_"+_28+" .hfchat_closebox_bottom").removeClass("hfchat_closebox_bottom_click");_28="";_7a("openChatboxId",_28);}$("#hfchat_userstab_popup").removeClass("hfchat_tabopen");$("#hfchat_userstab").removeClass("hfchat_userstabclick").removeClass("hfchat_tabclick");$("#hfchat_optionsbutton_popup").removeClass("hfchat_tabopen");$("#hfchat_optionsbutton").removeClass("hfchat_tabclick");_7a("buddylist","0");var _114="_self";if(_3[id][3]){_114=_3[id][3];}if(_114=="_popup"){if(_34!=id){$("#hfchat_trayicon_"+_34+"_popup").removeClass("hfchat_tabopen");$("#hfchat_trayicon_"+_34).removeClass("hfchat_trayclick");_34="";_7a("trayOpen",_34);}if(_34==""){$("#hfchat_trayicon_"+id+"_popup").css("left",$("#hfchat_trayicon_"+id).offset().left-1).css("bottom","24px").css("width",_3[id][4]);if(ie6){$("#hfchat_trayicon_"+id+"_popup .hfchat_traytitle").css("width",parseInt(_3[id][4])-5);}$("#hfchat_trayicon_"+id+"_popup").addClass("hfchat_tabopen");$("#hfchat_trayicon_"+id).addClass("hfchat_trayclick");if($("#hfchat_trayicon_"+id+"_iframe").attr("src")===undefined||$("#hfchat_trayicon_"+id+"_iframe").attr("src")=="blank.html"||$("#hfchat_trayicon_"+id+"_iframe").attr("src")==""){$("#hfchat_trayicon_"+id+"_iframe").attr("src",_3[id][2]);}_34=id;_7a("trayOpen",_34);}else{$("#hfchat_trayicon_"+_34+"_popup").removeClass("hfchat_tabopen");$("#hfchat_trayicon_"+_34).removeClass("hfchat_trayclick");_34="";_7a("trayOpen",_34);}if(ie6){_5e();}}else{window.open(_3[id][2],_114);}});$("#hfchat_chatbox_right").bind("click",_d1);$("#hfchat_chatbox_left").bind("click",_cf);_bf();_c9();$("#hfchat_chatbox_right").mouseover(function(){$(this).addClass("hfchat_chatbox_lr_mouseover");});$("#hfchat_chatbox_right").mouseout(function(){$(this).removeClass("hfchat_chatbox_lr_mouseover");});$("#hfchat_chatbox_left").mouseover(function(){$(this).addClass("hfchat_chatbox_lr_mouseover");});$("#hfchat_chatbox_left").mouseout(function(){$(this).removeClass("hfchat_chatbox_lr_mouseover");});$(window).bind("resize",_bf);_d5("buddylist","1");_d5("initialize","1");_d5("currenttime",_42);var _115=1;if(typeof document.body.style.maxHeight==="undefined"){if(_1f){$("#hfchat").css("display","none");_115=0;}else{ie6=true;_5e();$(window).bind("scroll",function(){_5e();});}}else{if(_4e){if(_20){$("#hfchat").css("display","none");_115=0;}else{ie6=true;_5e();$(window).bind("scroll",function(){_5e();});}}}document.onmousemove=function(e){var _116=new Date();_46=Math.floor(_116.getTime()/1000);};if(_23==1){_117();}if($.cookie(_a+"hidebar")=="1"){$("#hfchat").css("display","none");$("#hfchat_hidden").css("display","block");_115=0;}if(_115==1||_4c==1){_6d();}};function _118(){if(_29==0){var _119=$.cookie(_a+"state");_d9("updatingsession","1");if(_119!=null){var _11a=_119.split(/:/);if(_2a==0){var _11b=0;if(_11a[0]!=" "&&_11a[0]!=""){_11b=_11a[0];}if((_11b==0&&$("#hfchat_userstab").hasClass("hfchat_tabclick"))||(_11b==1&&!($("#hfchat_userstab").hasClass("hfchat_tabclick")))){$("#hfchat_userstab").click();}_11b="";if(_11a[1]!=" "&&_11a[1]!=""){_11b=_11a[1];}if(_11b!=_e0("activeChatboxes")){var _11c={};var _11d={};if(_11b!=""){var _11e=_11b.split(/,/);for(i=0;i<_11e.length;i++){var _11f=_11e[i].split(/\|/);_11c[_11f[0]]=_11f[1];}}if(_e0("activeChatboxes")!=""){var _11e=_e0("activeChatboxes").split(/,/);for(i=0;i<_11e.length;i++){var _11f=_11e[i].split(/\|/);_11d[_11f[0]]=_11f[1];}}for(r in _11c){if(_11c.hasOwnProperty(r)){_b5(r,parseInt(_11c[r]),0);if(parseInt(_11c[r])>0){_36=1;}}}for(y in _11d){if(_11d.hasOwnProperty(y)){if(_11c[y]==null){$("#hfchat_user_"+y+"_popup .hfchat_tabtitle .hfchat_closebox").click();}}}}if(_36>0){if(_4d==""){if(document.title==_2[15]){document.title=_35;}else{document.title=_2[15];}}}else{var _120=new Date();var _121=Math.floor(_120.getTime()/1000)-_46;if(_121<5){if(_4d==""){document.title=_35;}}}_11b=0;if(_11a[2]!=" "&&_11a[2]!=""){_11b=_11a[2];}if(_11b!=_28){if(_28!=""){_f1(_28);}if(_11b!=""){_f1(_11b);}}if(_11a[4]==1){_78(1);}}if(_11a[4]==0&&_2a==1){_2a=0;$("#hfchat_userstab_text").html(_2[9]+" ("+_33+")");_6d();_73();$("#hfchat_userstab_icon").addClass("hfchat_user_available2");$("#hfchat_optionsbutton_popup .available").css("text-decoration","underline");}if(_11a[5]!=" "&&_11a[5]!=""&&_11a[5]!=_34&&_11==1){$("#hfchat_trayicon_"+_11a[5]).click();}}_d9("updatingsession","0");clearTimeout(_2e);_2e=setTimeout(function(){_118();},4000);}};var _122={};function _5e(){var _123=["hfchat_base","hfchat_userstab_popup","hfchat_optionsbutton_popup","hfchat_tooltip","hfchat_hidden"];if(_28!=""){_123.push("hfchat_user_"+_28+"_popup");}if(_34!=""&&_34!=0){_123.push("hfchat_trayicon_"+_34+"_popup");}for(x in _123){$("#"+_123[x]).css("position","absolute");var _124=parseInt($("#"+_123[x]).css("bottom"));if(x==0){_124=0;}var _125=parseInt($("#"+_123[x]).height());if(_122[_123[x]]&&x!=3){_125=_122[_123[x]];}else{_122[_123[x]]=_125;}if(x==3){_124=30;}$("#"+_123[x]).css("top",(parseInt($(window).height())-_124-_125+parseInt($(window).scrollTop()))+"px");}};function _126(id,_127){if(!$("#hfchat_trayicon_"+id+"_popup").hasClass("hfchat_tabopen")){$("#hfchat_trayicon_"+id+" .hfchat_tabalert").remove();if(_127!=0){$("<div/>").css("top","-30px").css("left","10px").css("position","relative").addClass("hfchat_tabalert").html(_127).appendTo($("#hfchat_trayicon_"+id));}}};function _128(_129,self){if(_21){if(self==null||self==""){return "<table class=\"hfchat_iphone\" cellpadding=0 cellspacing=0 style=\"float:right\"><tr><td class=\"hfchat_tl\"></td><td class=\"hfchat_tc\"></td><td class=\"hfchat_tr\"></td></tr><tr><td class=\"hfchat_cl\"></td><td class=\"hfchat_cc\">"+_129+"</td><td class=\"hfchat_cr\"></td></tr><tr><td class=\"hfchat_bl\"></td><td class=\"hfchat_bc\"></td><td class=\"hfchat_br\"></td></tr></table><div style=\"clear:both\"></div>";}else{return "<table class=\"hfchat_iphone\" cellpadding=0 cellspacing=0><tr><td class=\"hfchat_xtl\"></td><td class=\"hfchat_xtc\"></td><td class=\"hfchat_xtr\"></td></tr><tr><td class=\"hfchat_xcl\"></td><td class=\"hfchat_xcc\">"+_129+"</td><td class=\"hfchat_xcr\"></td></tr><tr><td class=\"hfchat_xbl\"></td><td class=\"hfchat_xbc\"></td><td class=\"hfchat_xbr\"></td></tr></table><div style=\"clear:both\"></div>";}}return _129;};function _12a(){if(_22==1&&$.cookie(_a+"loggedin")!=1){$.post(_1+"hfchat_check.php",{},function(data){if(data==1){$.cookie(_a+"loggedin","1",{path:"/"});_10d();}});}else{_10d();}};function _117(){$("embed").each(function(i){if($(this).attr("id")!="hfchatbeep"){var _12b=this.cloneNode(true);_12b.setAttribute("WMode","Transparent");$(this).before(_12b);$(this).remove();}});$("object").each(function(i,v){if($(this).attr("id")!="hfchatbeep"){var _12c=$(this).children("embed");if(typeof (_12c.get(0))!="undefined"){if(typeof (_12c.get(0).outerHTML)!="undefined"){_12c.attr("wmode","transparent");$(this.outerHTML).insertAfter(this);$(this).remove();}return true;}var algo=this.attributes;var _12d="<OBJECT ";for(var i=0;i<algo.length;i++){_12d+=algo[i].name+"=\""+algo[i].value+"\" ";}_12d+=">";var flag=false;$(this).children().each(function(elem){if(this.nodeName=="PARAM"){if(this.name=="wmode"){flag=true;_12d+="<PARAM NAME=\""+this.name+"\" VALUE=\"transparent\">";}else{_12d+="<PARAM NAME=\""+this.name+"\" VALUE=\""+this.value+"\">";}}});if(!flag){_12d+="<PARAM NAME=\"wmode\" VALUE=\"transparent\">";}_12d+="</OBJECT>";$(_12d).insertAfter(this);$(this).remove();}});};arguments.callee.c5=function(){_10c();_12a();return;};arguments.callee.c6=function(){_12a();return;};arguments.callee.getActiveId=function(){return _28;};arguments.callee.getUser=function(id,_12e){$.ajax({url:_1+"hfchat_getid.php",data:{userid:id},type:"post",cache:false,dataFilter:function(data){if(typeof (JSON)!=="undefined"&&typeof (JSON.parse)==="function"){return JSON.parse(data);}else{return eval("("+data+")");}},success:function(data){if(data){window[_12e](data);}else{window[_12e](0);}}});};arguments.callee.ping=function(){return 1;};arguments.callee.chatWith=function(id){if(_29==0){if(_2a==1){_2a=0;$("#hfchat_userstab_text").html(_2[9]+" ("+_33+")");_6d();$("#hfchat_optionsbutton_popup .available").click();}_88(id,_37[id],_39[id],_38[id],_3a[id],_3b[id]);}};arguments.callee.getRecentData=function(id){$.ajax({cache:false,url:_1+"hfchat_receive.php",data:{chatbox:id},type:"post",dataFilter:function(data){if(typeof (JSON)!=="undefined"&&typeof (JSON.parse)==="function"){return JSON.parse(data);}else{return eval("("+data+")");}},success:function(data){if(_4d!=""){jqcc[_4d].loadData(id,data);}}});};arguments.callee.launchModule=function(id){if(!$("#hfchat_trayicon_"+id+"_popup").hasClass("hfchat_tabopen")){$("#hfchat_trayicon_"+id).click();}};arguments.callee.toggleModule=function(id){$("#hfchat_trayicon_"+id).click();};arguments.callee.closeModule=function(id){if($("#hfchat_trayicon_"+id+"_popup").hasClass("hfchat_tabopen")){$("#hfchat_trayicon_"+id).click();}};arguments.callee.joinChatroom=function(_12f,_130,_131){$("#hfchat_trayicon_chatrooms_iframe").attr("src",_1+"modules/chatrooms/index.php?roomid="+_12f+"&inviteid="+_130+"&roomname="+_131);$("#hfchat_trayicon_chatrooms").click();};arguments.callee.sendMessage=function(id,_132){if(_132!=""){$.post(_1+"hfchat_send.php",{to:id,message:_132},function(data){if(data){_e7(id,_132,1,1,data,1,1);$("#hfchat_tabcontenttext_"+id).scrollTop(50000);setTimeout(function(){$("#hfchat_tabcontenttext_"+id).scrollTop(50000);},100);}_30=1;if(_2f>_8){_2f=_8;clearTimeout(_2d);_2d=setTimeout(function(){_6d();},_8);}});}};arguments.callee.hideBar=function(){$("#hfchat_hidebar").click();};arguments.callee.getBaseUrl=function(){return _1;};arguments.callee.setAlert=function(id,_133){_126(id,_133);};arguments.callee.closeTooltip=function(){$("#hfchat_tooltip").css("display","none");};arguments.callee.scrollToTop=function(){$("html,body").animate({scrollTop:0},{"duration":"slow"});};arguments.callee.reinitialize=function(){if(_29==1){$("#hfchat_optionsbutton").removeClass("hfchat_optionsimages_exclamation");$("#hfchat_userstab").show();$("#hfchat_chatboxes").show();$("#hfchat_chatbox_left").show();$("#hfchat_chatbox_right").show();_29=0;_d5("initialize","1");_6d();}};};$.expr[":"].icontains=function(a,i,m){return (a.textContent||a.innerText||"").toLowerCase().indexOf(m[3].toLowerCase())>=0;};function _134(el,html){var _135=typeof el==="string"?document.getElementById(el):el;var _136=_135.cloneNode(false);_136.innerHTML=html;_135.parentNode.replaceChild(_136,_135);return _136;};})(jqcc);

<?php if (defined('USE_COMET') && USE_COMET == 1) { ?>
function cometready() {
	jqcc(document).ready(function () {   
		jqcc.hfchat();
		jqcc.hfchat.<?php echo $jsfn;?>();
	});
};
<?php } else { ?>
jqcc(document).ready(function () {   
	jqcc.hfchat();
	jqcc.hfchat.<?php echo $jsfn;?>();
});
<?php } ?>
